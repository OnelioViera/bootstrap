<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex">
    <title>Content Manager | Lindsay Precast</title>
    <style>
        body {
            margin: 0;
            padding: 0;
        }
        
        /* Hide the "Sign In with GitHub Using PAT" button on login screen only */
        [class*="login"] button[class*="secondary"],
        [class*="sign-in"] button:nth-of-type(2) {
            display: none !important;
        }
        
        /* Ensure delete buttons in list items are visible */
        [class*="delete"], 
        [class*="remove"],
        button[aria-label*="delete"],
        button[aria-label*="Delete"],
        button[aria-label*="remove"],
        button[aria-label*="Remove"] {
            display: flex !important;
            visibility: visible !important;
            opacity: 1 !important;
        }
        
        /* Make CMS logo bigger */
        [class*="logo"] img,
        [class*="brand"] img,
        header img,
        [class*="header"] img,
        [class*="sidebar"] img:first-of-type,
        [class*="app-bar"] img,
        img[alt*="Lindsay"],
        img[src*="lindsay"] {
            height: 70px !important;
            width: auto !important;
            max-height: 70px !important;
        }
        
        /* Login page logo */
        [class*="login"] img,
        [class*="sign-in"] img {
            height: 80px !important;
            width: auto !important;
            max-height: 80px !important;
            margin-bottom: 1rem;
        }
        
    </style>
</head>
<body>
    <!-- CMS will mount here -->
    <div id="nc-root"></div>
    
    <!-- 
    Using Sveltia CMS - a modern drop-in replacement for Decap CMS
    It supports GitHub PKCE authentication (no backend server needed!)
    Works perfectly on Vercel, Netlify, or any static host.
    -->
    <script src="https://unpkg.com/@sveltia/cms/dist/sveltia-cms.js"></script>
    
    <!-- Force remove PAT button after CMS loads -->
    <script>
        // Function to remove PAT button
        function removePATButton() {
            // Wait for CMS to render
            setTimeout(() => {
                // Find all buttons
                const buttons = document.querySelectorAll('button');
                buttons.forEach(button => {
                    const buttonText = button.textContent || button.innerText;
                    // Remove button if it contains PAT-related text
                    if (buttonText.includes('PAT') || 
                        buttonText.includes('Personal Access Token') ||
                        buttonText.includes('Using PAT')) {
                        button.remove();
                        console.log('PAT button removed');
                    }
                });
                
                // Also try by checking if it's the second button (PAT is usually second)
                const loginButtons = document.querySelectorAll('[class*="login"] button, [class*="sign"] button');
                if (loginButtons.length > 1) {
                    // Remove all buttons except the first one (OAuth)
                    for (let i = 1; i < loginButtons.length; i++) {
                        loginButtons[i].remove();
                    }
                }
            }, 500);
        }
        
        // Run multiple times to catch dynamic rendering
        removePATButton();
        setTimeout(removePATButton, 1000);
        setTimeout(removePATButton, 2000);
        
        // Watch for DOM changes and remove PAT button if it appears
        const observer = new MutationObserver(() => {
            removePATButton();
        });
        
        // Start observing
        setTimeout(() => {
            observer.observe(document.body, {
                childList: true,
                subtree: true
            });
        }, 100);
    </script>
    
    <!-- 
    ============================================
    SVELTIA CMS ADMIN PANEL
    ============================================
    
    TO ROLL BACK: Simply delete these folders:
    - /admin (this folder)
    - /content (content folder)
    
    Your original index.html is unchanged.
    ============================================
    -->
</body>
</html>
